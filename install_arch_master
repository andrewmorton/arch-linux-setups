#!/bin/bash

# Finish Arch setups
ln -sf /usr/share/zoneinfo/America/New_York /etc/localtime

# Sync time
hwclock --systohc

# Set Locale
echo "en_US.UTF-8 UTF-8" >> /etc/locale.gen
echo "LANG=en_US.UTF-8" >> /etc/locale.conf

##### Configure network
# Collect user information regarding their chosen hostname
# and cat to appropriate files
#####

read -p "Enter your super sweet hostname: " HOSTNAME
export HOSTNAME=$HOSTNAME

echo "$HOSTNAME" >> /etc/hostname

# Configure hosts file
cat << "EOF" > /etc/hosts
# Enter Your hostname information here
# This was generated by arch-linux-setups install_arch_master script
127.0.0.1	localhost
::1		localhost
127.0.0.1	${HOSTNAME}.localdomain	${HOSTNAME}
EOF

# TODO: Configure NetworkManager to login to wireless access point

##### END Configure network

# run multilib setup
echo "Running mutlilib_on.sh"
./user_scripts/multilib_on.sh &&
	echo "Successful"

# Install paclist_system from install paclist dir in repo
echo "Running install_paclist on paclist_system.txt"
./pacman_install/install_paclist ./pacman_install/paclist_system.txt &&
	echo "Successful"

# install paclist.txt
echo "Running install_paclist on paclist.txt"
./pacman_install/install_paclist ./pacman_install/paclist.txt &&
	echo "Successful"
# install nvidia
# install steaam
# install paru
# install optimus manager
# Enable sddm and NetworkManger
systemctl enable sddm
systemctl enabel NetworkManager

# Create sudo group
groupadd sudo
# useradd
read -p "Enter the name of your RAD user: " USERNAME
useradd -m -G sudo,users $USERNAME

##### Restore dotfiles and config files
# Restores the dotfiles that are kept in $REPO/dofiles to the newly created user folder
##### END Restore dotfiles

cat ./dotfiles/bashrc > /home/$USERNAME/.bashrc
# reboot
